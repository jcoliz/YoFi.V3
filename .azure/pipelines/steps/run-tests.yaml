steps:
- task: DotNetCoreCLI@2
  displayName: 'Run unit tests'
  inputs:
    workingDirectory: $(Solution.UnitTestsDirectory)
    command: 'test'
    arguments: '--collect:"XPlat Code Coverage" --settings:coverlet.runsettings'
- task: DotNetCoreCLI@2
  displayName: 'Run integration tests'
  inputs:
    workingDirectory: $(Solution.IntegrationTestsDirectory)
    command: 'test'
- task: PublishCodeCoverageResults@2
  displayName: 'Publish code coverage'
  inputs:
    codeCoverageTool: 'Cobertura'
    summaryFileLocation: '$(Agent.TempDirectory)/*/coverage.cobertura.xml'
