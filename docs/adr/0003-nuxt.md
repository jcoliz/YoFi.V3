# 0003. Using Nuxt

Date: 2025-11-09

## Status

Accepted

## Context

Once we've decided to use Vue, the next decision is whether to use straight Vue.JS or Nuxt.

## Decision

We'll use Nuxt. Largely this is driven by the consensus among my colleagues that "no one" uses Vue.JS for a professional website in 2025. Nuxt is the common choice.

Still, some things I like personally about it

* File-based routing
* Automatic imports
* Built-in layouts
* Static site generation
* Deployment flexibility

Perhaps most important is the possibility to deploy the front end as a static web app. I have done this with simple samples, but never coupled it with a traditional backend. This will be a topic to explore!

## Consequences

Captured for future reference, here is Claude's view of the consequences of this choice

Nuxt is a **meta-framework** built on top of Vue.js, similar to how Next.js relates to React. Here's why you'd choose Nuxt:

### 1. File-Based Routing

**Plain Vue:**
```typescript
// You manually configure routes
import { createRouter, createWebHistory } from 'vue-router'
import Home from './views/Home.vue'
import About from './views/About.vue'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    { path: '/', component: Home },
    { path: '/about', component: About },
    { path: '/users/:id', component: UserDetail }
  ]
})
```

**Nuxt:**
```
pages/
  index.vue          ‚Üí /
  about.vue          ‚Üí /about
  users/
    [id].vue         ‚Üí /users/:id
```

Routes are **automatically generated** from file structure. Less boilerplate, easier to maintain.

### 2. Server-Side Rendering (SSR) Out of the Box

**Plain Vue:** SPA only by default. SSR requires complex setup with custom Node.js server, build configuration, etc.

**Nuxt:** SSR/SSG ready with zero config:
- Better SEO (search engines see rendered HTML)
- Faster initial page load
- Can choose per-route: SSR, SSG, or SPA
- Built-in hydration handling

```vue
<!-- Nuxt: Server-side data fetching is simple -->
<script setup>
const { data } = await useFetch('/api/users')
</script>
```

### 3. Auto-Imports

**Plain Vue:**
```typescript
import { ref, computed, watch } from 'vue'
import { useRouter, useRoute } from 'vue-router'
import MyComponent from '~/components/MyComponent.vue'

export default {
  components: { MyComponent },
  setup() {
    const count = ref(0)
    const router = useRouter()
    // ...
  }
}
```

**Nuxt:**
```vue
<script setup>
// All automatically imported - no imports needed!
const count = ref(0)
const router = useRouter()
// Components auto-imported from components/ folder
</script>

<template>
  <MyComponent /> <!-- No registration needed -->
</template>
```

Reduces boilerplate significantly.

### 4. Built-in Layouts

**Plain Vue:** Manually implement layout wrapper components

**Nuxt:**
```
layouts/
  default.vue     ‚Üí Used automatically
  admin.vue       ‚Üí Optional layout

pages/
  index.vue       ‚Üí Uses default layout
  admin/
    dashboard.vue ‚Üí Can specify admin layout
```

```vue
<!-- pages/admin/dashboard.vue -->
<script setup>
definePageMeta({
  layout: 'admin'
})
</script>
```

### 5. API Routes (Full-Stack Capability)

**Nuxt 3+** includes server endpoints:

```typescript
// server/api/users.ts
export default defineEventHandler(async (event) => {
  return await $fetch('https://api.example.com/users')
})
```

Access from frontend:
```vue
<script setup>
const { data } = await useFetch('/api/users') // Calls your server endpoint
</script>
```

No need for separate backend for simple APIs. Great for BFF (Backend for Frontend) pattern.

### 6. Powerful Data Fetching Composables

**Plain Vue:** Manual axios/fetch setup, loading states, error handling

**Nuxt:**
```vue
<script setup>
// Automatic loading, error, retry, caching
const { data, pending, error, refresh } = await useFetch('/api/data', {
  key: 'unique-key',
  transform: (data) => data.items,
  watch: [someRef] // Re-fetch when changes
})
</script>

<template>
  <div v-if="pending">Loading...</div>
  <div v-else-if="error">Error: {{ error.message }}</div>
  <div v-else>{{ data }}</div>
</template>
```

Also: `useAsyncData`, `useLazyFetch`, etc.

### 7. Modules Ecosystem

Rich plugin ecosystem with one-line installation:

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: [
    '@nuxtjs/tailwindcss',  // Tailwind CSS
    '@pinia/nuxt',          // State management
    '@vueuse/nuxt',         // Composition utilities
    '@nuxt/image',          // Image optimization
    '@nuxtjs/i18n'          // Internationalization
  ]
})
```

Modules integrate seamlessly, no manual configuration needed.

### 8. Built-in SEO & Meta Management

**Plain Vue:** Manual setup with libraries like vue-meta

**Nuxt:**
```vue
<script setup>
useHead({
  title: 'My Page',
  meta: [
    { name: 'description', content: 'Page description' }
  ]
})

// Or use SEO composable
useSeoMeta({
  title: 'My Page',
  ogTitle: 'My Page',
  description: 'Page description',
  ogDescription: 'Page description',
  ogImage: '/image.jpg'
})
</script>
```

### 9. Static Site Generation (SSG)

```bash
# Generate static HTML for all routes
nuxt generate
```

Deploy to any static host (Netlify, Vercel, Cloudflare Pages). Combines SPA benefits with static hosting simplicity.

### 10. TypeScript Support

**Plain Vue:** Manual tsconfig, type declarations

**Nuxt:** TypeScript works out of the box:
- Auto-generates types for routes, composables, components
- Type-safe `useFetch` returns
- Auto-completion for everything

```typescript
// Automatically typed!
const route = useRoute() // Knows all route params
const router = useRouter() // Typed navigation
```

### 11. Development Experience

- **Hot Module Replacement (HMR)** - Powered by Vite, extremely fast
- **DevTools** - Built-in Nuxt DevTools for debugging
- **Error Handling** - Beautiful error pages in dev
- **Auto-restart** - Config changes auto-restart dev server

### 12. Deployment Flexibility

Nuxt can deploy as:
- **Node.js SSR** - Full server-side rendering
- **Static (JAMstack)** - Pre-rendered HTML
- **Edge/Serverless** - Vercel, Netlify, Cloudflare Workers
- **SPA** - Traditional single-page app

Switch deployment targets with minimal config changes.

### 13. Middleware & Route Guards

```typescript
// middleware/auth.ts
export default defineNuxtRouteMiddleware((to, from) => {
  const auth = useAuth()
  if (!auth.isLoggedIn) {
    return navigateTo('/login')
  }
})
```

```vue
<!-- pages/dashboard.vue -->
<script setup>
definePageMeta({
  middleware: 'auth' // Auto-applied
})
</script>
```

### 14. Built-in State Management

With `useState`:
```typescript
// composables/useCounter.ts
export const useCounter = () => {
  const count = useState('count', () => 0)

  const increment = () => count.value++

  return { count, increment }
}
```

Shared state across components without Pinia/Vuex for simple cases.

### When to Use Plain Vue Instead

Use **plain Vue** when:
- ‚ùå Building a component library (not an app)
- ‚ùå Embedding Vue into existing non-SPA app
- ‚ùå You need maximum control over build process
- ‚ùå Very simple, single-page widget
- ‚ùå Learning Vue fundamentals first

Use **Nuxt** when:
- ‚úÖ Building a full application
- ‚úÖ Need SEO (SSR/SSG)
- ‚úÖ Want productivity and conventions
- ‚úÖ Multi-page application
- ‚úÖ Want modern DX without configuration

### For YoFi.V3 Specifically

**Why Nuxt is perfect:**

1. **File-based routing** - Your app has many pages (transactions, budgets, payees, etc.)
2. **Auto-imports** - Cleaner code, less boilerplate
3. **TypeScript** - Strong typing without ceremony
4. **API routes** - Can implement BFF pattern if needed
5. **SSR capability** - Landing/marketing pages can be server-rendered for SEO
6. **Layouts** - Dashboard layout vs. public layout
7. **Middleware** - Authentication guards
8. **Modules** - Easy integration with auth, UI libraries, etc.
9. **DX** - Fast development with HMR, DevTools
10. **Future-proof** - Easy to add features (PWA, i18n, etc.)

### Summary

**Nuxt = Vue + Conventions + Tooling + SSR/SSG**

It's not Vue *vs* Nuxt‚ÄîNuxt **is** Vue with:
- üìÅ Smart file-based conventions
- ‚ö° Performance optimizations
- üõ†Ô∏è Excellent developer experience
- üöÄ Production-ready features
- üì¶ Ecosystem integration

For any serious Vue application, Nuxt saves weeks of setup time and provides a battle-tested foundation. You write Vue code, but get enterprise features for free. üéØ

## Related Decisions

- [0002. Vue.js Frontend](0002-vue-js.md) - Choice of Vue.js as the underlying frontend framework